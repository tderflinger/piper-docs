<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>config.py | Piper Documentation</title><link rel="canonical" href="https://tderflinger.github.io/piper-docs/codereading/python/piper_train/vits/config/"/><link rel="sitemap" href="/piper-docs/sitemap-index.xml"/><link rel="shortcut icon" href="/piper-docs/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.5.3"/><meta name="generator" content="Starlight v0.32.3"/><meta property="og:title" content="config.py"/><meta property="og:type" content="article"/><meta property="og:url" content="https://tderflinger.github.io/piper-docs/codereading/python/piper_train/vits/config/"/><meta property="og:locale" content="en"/><meta property="og:description" content="configs.py"/><meta property="og:site_name" content="Piper Documentation"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="configs.py"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/piper-docs/_astro/print.BJ0teN4y.css" media="print"><link rel="stylesheet" href="/piper-docs/_astro/index.-0NCauzY.css">
<style>:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-avdet4wd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-avdet4wd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-avdet4wd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-avdet4wd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-avdet4wd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-avdet4wd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-avdet4wd){vertical-align:middle}
.card-grid:where(.astro-zntqmydn){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-zntqmydn)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-zntqmydn){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-zntqmydn){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-zntqmydn)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}
.card:where(.astro-v5tidmuc){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-v5tidmuc):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-v5tidmuc):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-v5tidmuc):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-v5tidmuc):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-v5tidmuc){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-v5tidmuc) .icon:where(.astro-v5tidmuc){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem}.card:where(.astro-v5tidmuc) .body:where(.astro-v5tidmuc){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}
svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}
.sl-link-button:where(.astro-xwgiixxa){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-xwgiixxa).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-xwgiixxa).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-xwgiixxa) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-xwgiixxa){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa):not(:where(p *)){margin-block:1rem}
</style><script type="module" src="/piper-docs/_astro/page.7qqag-5g.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/piper-docs/" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3" translate="no"> Piper Documentation </span> </a>  </div> <div class="sl-flex print:hidden astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/piper-docs/_astro/Search.astro_astro_type_script_index_0_lang.CLtx1Xk7.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="00plfdl" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">About</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/about/intro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Voices</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/about/voices/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Available Voices</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/about/voices/download/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Download Voices</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/about/dependencies/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dependencies</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/about/project_use/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">People Using Piper</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Guides</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/guides/installation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Installation Guide</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/guides/usage/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Usage Guide</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/guides/training/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Training Guide</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Code Reading</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/intro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">cpp</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/cpp/main/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">main.cpp</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/cpp/piper/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">piper.cpp</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">python_run</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/main/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">__main__.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/config/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">config.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/download/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">download.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/file_hash/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">file_hash.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/http_server/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">http_server.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/util/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">util.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python_run/piper/voice/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">voice.py</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="6"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">piper_train</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/main/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">__main__.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/check_phonemes/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">check_phonemes.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/clean_cached_audio/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">clean_cached_audio.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/export_generator/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">export_generator.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/export_onnx_streaming/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">export_onnx_streaming.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/export_onnx/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">export_onnx.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/export_torchscript/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">export_torchscript.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/filter_utterances/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">filter_utterances.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/infer_generator/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">infer_generator.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/infer_onnx_streaming/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">infer_onnx_streaming.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/infer_onnx/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">infer_onnx.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/infer_torchscript/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">infer_torchscript.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/infer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">infer.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/preprocess/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">preprocess.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/select_speaker/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">select_speaker.py</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="7"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">vits</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/attentions/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">attentions.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/commons/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">commmons.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/config/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">config.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/dataset/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">dataset.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/lightning/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">lightning.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/losses/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">losses.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/mel_processing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mel_processing.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/models/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">models.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/modules/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">modules.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/transforms/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">transforms.py</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/piper-docs/codereading/python/piper_train/vits/utils/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">utils.py</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/withastro/starlight" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#code-explained" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Code Explained</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#1-melaudioconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1. MelAudioConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#2-modelaudioconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2. ModelAudioConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#3-modelconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3. ModelConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#4-trainingconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4. TrainingConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#purpose-and-use-case" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Purpose and Use Case</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#source-code" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Source Code</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/piper-docs/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#code-explained" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Code Explained</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#1-melaudioconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">1. MelAudioConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#2-modelaudioconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">2. ModelAudioConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#3-modelconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">3. ModelConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#4-trainingconfig" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">4. TrainingConfig</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#purpose-and-use-case" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Purpose and Use Case</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#source-code" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Source Code</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/piper-docs/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">config.py</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <h2 id="code-explained">Code Explained</h2>
<p>The provided code defines several configuration classes using Python’s <code dir="auto">dataclass</code> decorator. These classes encapsulate various parameters for audio processing, model architecture, and training, making the codebase modular and easier to manage. Below is a detailed explanation of each class:</p>
<hr>
<h3 id="1-melaudioconfig"><strong>1. <code dir="auto">MelAudioConfig</code></strong></h3>
<p>This class defines the configuration for generating mel spectrograms, which are commonly used in audio processing tasks like speech synthesis. Key attributes include:</p>
<ul>
<li><strong><code dir="auto">filter_length</code></strong>: The length of the FFT window.</li>
<li><strong><code dir="auto">hop_length</code></strong>: The step size between successive frames.</li>
<li><strong><code dir="auto">win_length</code></strong>: The size of the window applied to each frame.</li>
<li><strong><code dir="auto">mel_channels</code></strong>: The number of mel frequency bins.</li>
<li><strong><code dir="auto">sample_rate</code></strong>: The audio sampling rate.</li>
<li><strong><code dir="auto">mel_fmin</code> and <code dir="auto">mel_fmax</code></strong>: The minimum and maximum frequencies for the mel filter bank.</li>
</ul>
<p>These parameters control how raw audio is transformed into mel spectrograms, which serve as input features for models.</p>
<hr>
<h3 id="2-modelaudioconfig"><strong>2. <code dir="auto">ModelAudioConfig</code></strong></h3>
<p>This class specifies the audio-related parameters for the model’s architecture. Key attributes include:</p>
<ul>
<li><strong><code dir="auto">resblock</code></strong>: The type of residual block used in the model.</li>
<li><strong><code dir="auto">resblock_kernel_sizes</code></strong>: Kernel sizes for the residual blocks.</li>
<li><strong><code dir="auto">resblock_dilation_sizes</code></strong>: Dilation rates for the residual blocks.</li>
<li><strong><code dir="auto">upsample_rates</code></strong>: Upsampling factors for the model’s decoder.</li>
<li><strong><code dir="auto">upsample_initial_channel</code></strong>: The number of channels in the initial upsampling layer.</li>
<li><strong><code dir="auto">upsample_kernel_sizes</code></strong>: Kernel sizes for the upsampling layers.</li>
</ul>
<p>The class also provides two static methods:</p>
<ul>
<li><strong><code dir="auto">low_quality()</code></strong>: Returns a configuration optimized for lower-quality audio with smaller kernel sizes and fewer channels.</li>
<li><strong><code dir="auto">high_quality()</code></strong>: Returns a configuration optimized for higher-quality audio with larger kernel sizes and more channels.</li>
</ul>
<p>These methods allow for quick switching between different audio quality settings.</p>
<hr>
<h3 id="3-modelconfig"><strong>3. <code dir="auto">ModelConfig</code></strong></h3>
<p>This class defines the overall configuration for the model, combining audio settings, mel spectrogram settings, and architectural parameters. Key attributes include:</p>
<ul>
<li><strong><code dir="auto">num_symbols</code></strong>: The number of input symbols (e.g., phonemes or characters).</li>
<li><strong><code dir="auto">n_speakers</code></strong>: The number of speakers in the dataset.</li>
<li><strong><code dir="auto">audio</code></strong>: An instance of <code dir="auto">ModelAudioConfig</code>.</li>
<li><strong><code dir="auto">mel</code></strong>: An instance of <code dir="auto">MelAudioConfig</code> (defaulted to a new instance).</li>
<li><strong><code dir="auto">inter_channels</code>, <code dir="auto">hidden_channels</code>, <code dir="auto">filter_channels</code></strong>: Dimensions for intermediate, hidden, and filter layers.</li>
<li><strong><code dir="auto">n_heads</code> and <code dir="auto">n_layers</code></strong>: Parameters for multi-head attention and the number of layers in the model.</li>
<li><strong><code dir="auto">use_spectral_norm</code></strong>: Whether to apply spectral normalization.</li>
<li><strong><code dir="auto">gin_channels</code></strong>: The number of global conditioning channels, used for multi-speaker models.</li>
<li><strong><code dir="auto">segment_size</code></strong>: The size of audio segments processed by the model.</li>
</ul>
<h4 id="properties">Properties:</h4>
<ul>
<li>The class provides several properties to expose audio-related attributes (e.g., <code dir="auto">resblock</code>, <code dir="auto">upsample_rates</code>) directly from the <code dir="auto">audio</code> configuration.</li>
<li><strong><code dir="auto">is_multispeaker</code></strong>: A property that checks if the model is configured for multiple speakers.</li>
</ul>
<h4 id="post-initialization">Post-Initialization:</h4>
<ul>
<li>The <code dir="auto">__post_init__</code> method ensures that <code dir="auto">gin_channels</code> is set to 512 if the model is multi-speaker and <code dir="auto">gin_channels</code> is not explicitly defined.</li>
</ul>
<hr>
<h3 id="4-trainingconfig"><strong>4. <code dir="auto">TrainingConfig</code></strong></h3>
<p>This class encapsulates hyperparameters for training the model. Key attributes include:</p>
<ul>
<li><strong><code dir="auto">learning_rate</code></strong>: The initial learning rate.</li>
<li><strong><code dir="auto">betas</code> and <code dir="auto">eps</code></strong>: Parameters for the Adam optimizer.</li>
<li><strong><code dir="auto">fp16_run</code></strong>: Whether to use mixed-precision training for faster computation.</li>
<li><strong><code dir="auto">lr_decay</code></strong>: The learning rate decay factor.</li>
<li><strong><code dir="auto">warmup_epochs</code></strong>: The number of warmup epochs for learning rate scheduling.</li>
<li><strong><code dir="auto">c_mel</code> and <code dir="auto">c_kl</code></strong>: Coefficients for mel spectrogram loss and KL divergence loss.</li>
<li><strong><code dir="auto">grad_clip</code></strong>: The maximum gradient value for clipping, preventing exploding gradients.</li>
</ul>
<hr>
<h3 id="purpose-and-use-case"><strong>Purpose and Use Case</strong></h3>
<p>These configuration classes are designed to make the codebase modular and flexible. By encapsulating parameters in dedicated classes, the code becomes easier to maintain and extend. For example:</p>
<ul>
<li><strong><code dir="auto">MelAudioConfig</code></strong> and <strong><code dir="auto">ModelAudioConfig</code></strong> handle audio-specific settings, enabling quick adjustments for different datasets or quality requirements.</li>
<li><strong><code dir="auto">ModelConfig</code></strong> centralizes model architecture settings, ensuring consistency across components.</li>
<li><strong><code dir="auto">TrainingConfig</code></strong> simplifies the management of training hyperparameters, making it easier to experiment with different setups.</li>
</ul>
<p>This structure is particularly useful in machine learning projects where configurations often need to be adjusted for different tasks, datasets, or hardware setups.</p>
<h2 id="source-code">Source Code</h2>
<div class="expressive-code"><link rel="stylesheet" href="/piper-docs/_astro/ec.tm3va.css"><script type="module" src="/piper-docs/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="py"><code><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">"""</span><span style="--0:#ECC48D;--1:#984E4D">Configuration classes</span><span style="--0:#D9F5DD;--1:#111111">"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> dataclasses </span><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> dataclass, field</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> typing </span><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> Optional, Tuple</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">@dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">MelAudioConfig</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">filter_length: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1024</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">hop_length: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">256</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">win_length: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1024</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">mel_channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">80</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">sample_rate: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">22050</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">sample_bytes: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">mel_fmin: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">mel_fmax: Optional[</span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">@dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">ModelAudioConfig</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">resblock: </span><span style="--0:#C5E478;--1:#3B61B0">str</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">resblock_kernel_sizes: Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">resblock_dilation_sizes: Tuple[Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">], </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">upsample_rates: Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">upsample_initial_channel: </span><span style="--0:#C5E478;--1:#3B61B0">int</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">upsample_kernel_sizes: Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@staticmethod</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">low_quality</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">ModelAudioConfig</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#096E72">ModelAudioConfig</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">2</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock_kernel_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock_dilation_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">6</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">12</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">            </span></span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_rates</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_initial_channel</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#F78C6C;--1:#AA0982">256</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_kernel_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@staticmethod</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">high_quality</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">ModelAudioConfig</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#096E72">ModelAudioConfig</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">1</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock_kernel_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">7</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">11</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">resblock_dilation_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">                </span></span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">5</span><span style="--0:#82AAFF;--1:#3B61B0">),</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#82AAFF;--1:#3B61B0">            </span></span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_rates</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_initial_channel</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#F78C6C;--1:#AA0982">512</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D7DBE0;--1:#403F53">upsample_kernel_sizes</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">16</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D9F5DD;--1:#111111">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">@dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">ModelConfig</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">num_symbols: </span><span style="--0:#C5E478;--1:#3B61B0">int</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">n_speakers: </span><span style="--0:#C5E478;--1:#3B61B0">int</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">audio: ModelAudioConfig</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">mel: MelAudioConfig </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#096E72">field</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">default_factory</span></span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">MelAudioConfig</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">inter_channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">hidden_channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">192</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">filter_channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">768</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">n_heads: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">n_layers: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">6</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">kernel_size: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">p_dropout: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.1</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">n_layers_q: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">use_spectral_norm: </span><span style="--0:#C5E478;--1:#3B61B0">bool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">False</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">gin_channels: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#919F9F;--1:#5F636F"># single speaker</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">use_sdp: </span><span style="--0:#C5E478;--1:#3B61B0">bool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">True</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#919F9F;--1:#5F636F"># StochasticDurationPredictor</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">segment_size: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">8192</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">is_multispeaker</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#C5E478;--1:#3B61B0">bool</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.n_speakers </span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">resblock</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#C5E478;--1:#3B61B0">str</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.resblock</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">resblock_kernel_sizes</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.resblock_kernel_sizes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">resblock_dilation_sizes</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> Tuple[Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">], </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.resblock_dilation_sizes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">upsample_rates</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.upsample_rates</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">upsample_initial_channel</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.upsample_initial_channel</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">@property</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">upsample_kernel_sizes</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> -> Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">...</span><span style="--0:#D6DEEB;--1:#403F53">]:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.audio.upsample_kernel_sizes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> __post_init__</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#096E72">self</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.is_multispeaker </span><span style="--0:#C792EA;--1:#8844AE">and</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.gin_channels </span><span style="--0:#C792EA;--1:#8844AE">==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">):</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8EACE3;--1:#AA0982">self</span><span style="--0:#D6DEEB;--1:#403F53">.gin_channels </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">512</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">@dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">TrainingConfig</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">learning_rate: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2e-4</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">betas: Tuple[</span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#B2CCD6;--1:#096E72">field</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">default</span></span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#82AAFF;--1:#3B61B0">(</span><span style="--0:#F78C6C;--1:#AA0982">0.8</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#F78C6C;--1:#AA0982">0.99</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">eps: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1e-9</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5F636F"># batch_size: int = 32</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">fp16_run: </span><span style="--0:#C5E478;--1:#3B61B0">bool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">False</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">lr_decay: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0.999875</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">init_lr_ratio: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1.0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">warmup_epochs: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">c_mel: </span><span style="--0:#C5E478;--1:#3B61B0">int</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">45</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">c_kl: </span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1.0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">grad_clip: Optional[</span><span style="--0:#C5E478;--1:#3B61B0">float</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># @dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class PhonemesConfig(DataClassJsonMixin):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     phoneme_separator: str = " "</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     """Separator between individual phonemes in CSV input"""</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     word_separator: str = "#"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     """Separator between word phonemes in CSV input (must not match phoneme_separator)"""</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     phoneme_to_id: typing.Optional[typing.Dict[str, int]] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     pad: typing.Optional[str] = "_"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     bos: typing.Optional[str] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     eos: typing.Optional[str] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     blank: typing.Optional[str] = "#"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     blank_word: typing.Optional[str] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     blank_between: typing.Union[str, BlankBetween] = BlankBetween.WORDS</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     blank_at_start: bool = True</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     blank_at_end: bool = True</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     simple_punctuation: bool = True</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     punctuation_map: typing.Optional[typing.Dict[str, str]] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     separate: typing.Optional[typing.List[str]] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     separate_graphemes: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     separate_tones: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     tone_before: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     phoneme_map: typing.Optional[typing.Dict[str, typing.List[str]]] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     auto_bos_eos: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     minor_break: typing.Optional[str] = IPA.BREAK_MINOR.value</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     major_break: typing.Optional[str] = IPA.BREAK_MAJOR.value</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     break_phonemes_into_graphemes: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     break_phonemes_into_codepoints: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     drop_stress: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     symbols: typing.Optional[typing.List[str]] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def split_word_phonemes(self, phonemes_str: str) -> typing.List[typing.List[str]]:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Split phonemes string into a list of lists (outer is words, inner is individual phonemes in each word)"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return [</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             word_phonemes_str.split(self.phoneme_separator)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             if self.phoneme_separator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             else list(word_phonemes_str)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             for word_phonemes_str in phonemes_str.split(self.word_separator)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         ]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def join_word_phonemes(self, word_phonemes: typing.List[typing.List[str]]) -> str:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Split phonemes string into a list of lists (outer is words, inner is individual phonemes in each word)"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return self.word_separator.join(</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             self.phoneme_separator.join(wp) for wp in word_phonemes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         )</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class Phonemizer(str, Enum):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     SYMBOLS = "symbols"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     GRUUT = "gruut"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     ESPEAK = "espeak"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     EPITRAN = "epitran"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class Aligner(str, Enum):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     KALDI_ALIGN = "kaldi_align"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class TextCasing(str, Enum):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     LOWER = "lower"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     UPPER = "upper"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class MetadataFormat(str, Enum):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     TEXT = "text"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     PHONEMES = "phonemes"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     PHONEME_IDS = "ids"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># @dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class DatasetConfig:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     name: str</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     metadata_format: MetadataFormat = MetadataFormat.TEXT</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     multispeaker: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     text_language: typing.Optional[str] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     audio_dir: typing.Optional[typing.Union[str, Path]] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     cache_dir: typing.Optional[typing.Union[str, Path]] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def get_cache_dir(self, output_dir: typing.Union[str, Path]) -> Path:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         if self.cache_dir is not None:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             cache_dir = Path(self.cache_dir)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         else:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             cache_dir = Path("cache") / self.name</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         if not cache_dir.is_absolute():</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             cache_dir = Path(output_dir) / str(cache_dir)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return cache_dir</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># @dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class AlignerConfig:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     aligner: typing.Optional[Aligner] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     casing: typing.Optional[TextCasing] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># @dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class InferenceConfig:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     length_scale: float = 1.0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     noise_scale: float = 0.667</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     noise_w: float = 0.8</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># @dataclass</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># class TrainingConfig(DataClassJsonMixin):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     seed: int = 1234</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     epochs: int = 10000</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     learning_rate: float = 2e-4</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     betas: typing.Tuple[float, float] = field(default=(0.8, 0.99))</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     eps: float = 1e-9</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     batch_size: int = 32</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     fp16_run: bool = False</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     lr_decay: float = 0.999875</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     segment_size: int = 8192</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     init_lr_ratio: float = 1.0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     warmup_epochs: int = 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     c_mel: int = 45</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     c_kl: float = 1.0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     grad_clip: typing.Optional[float] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     min_seq_length: typing.Optional[int] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     max_seq_length: typing.Optional[int] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     min_spec_length: typing.Optional[int] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     max_spec_length: typing.Optional[int] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     min_speaker_utterances: typing.Optional[int] = None</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     last_epoch: int = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     global_step: int = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     best_loss: typing.Optional[float] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     audio: AudioConfig = field(default_factory=AudioConfig)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     model: ModelConfig = field(default_factory=ModelConfig)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     phonemes: PhonemesConfig = field(default_factory=PhonemesConfig)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     text_aligner: AlignerConfig = field(default_factory=AlignerConfig)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     text_language: typing.Optional[str] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     phonemizer: typing.Optional[Phonemizer] = None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     datasets: typing.List[DatasetConfig] = field(default_factory=list)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     inference: InferenceConfig = field(default_factory=InferenceConfig)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     version: int = 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     git_commit: str = ""</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     @property</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def is_multispeaker(self):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return self.model.is_multispeaker or any(d.multispeaker for d in self.datasets)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def save(self, config_file: typing.TextIO):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Save config as JSON to a file"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         json.dump(self.to_dict(), config_file, indent=4)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def get_speaker_id(self, dataset_name: str, speaker_name: str) -> int:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         if self.speaker_id_map is None:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             self.speaker_id_map = {}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         full_speaker_name = f"{dataset_name}_{speaker_name}"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         speaker_id = self.speaker_id_map.get(full_speaker_name)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         if speaker_id is None:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             speaker_id = len(self.speaker_id_map)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             self.speaker_id_map[full_speaker_name] = speaker_id</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return speaker_id</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     @staticmethod</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def load(config_file: typing.TextIO) -> "TrainingConfig":</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Load config from a JSON file"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return TrainingConfig.from_json(config_file.read())</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     @staticmethod</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def load_and_merge(</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         config: "TrainingConfig",</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         config_files: typing.Iterable[typing.Union[str, Path, typing.TextIO]],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     ) -> "TrainingConfig":</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Loads one or more JSON configuration files and overlays them on top of an existing config"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         base_dict = config.to_dict()</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         for maybe_config_file in config_files:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             if isinstance(maybe_config_file, (str, Path)):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 # File path</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 config_file = open(maybe_config_file, "r", encoding="utf-8")</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             else:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 # File object</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 config_file = maybe_config_file</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             with config_file:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 # Load new config and overlay on existing config</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 new_dict = json.load(config_file)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 TrainingConfig.recursive_update(base_dict, new_dict)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         return TrainingConfig.from_dict(base_dict)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     @staticmethod</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     def recursive_update(</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         base_dict: typing.Dict[typing.Any, typing.Any],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         new_dict: typing.Mapping[typing.Any, typing.Any],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#     ) -> None:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         """Recursively overwrites values in base dictionary with values from new dictionary"""</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#         for key, value in new_dict.items():</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             if isinstance(value, collections.Mapping) and (</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 base_dict.get(key) is not None</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             ):</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 TrainingConfig.recursive_update(base_dict[key], value)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#             else:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">#                 base_dict[key] = value</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="&#x22;&#x22;&#x22;Configuration classes&#x22;&#x22;&#x22;from dataclasses import dataclass, fieldfrom typing import Optional, Tuple@dataclassclass MelAudioConfig:    filter_length: int = 1024    hop_length: int = 256    win_length: int = 1024    mel_channels: int = 80    sample_rate: int = 22050    sample_bytes: int = 2    channels: int = 1    mel_fmin: float = 0.0    mel_fmax: Optional[float] = None@dataclassclass ModelAudioConfig:    resblock: str    resblock_kernel_sizes: Tuple[int, ...]    resblock_dilation_sizes: Tuple[Tuple[int, ...], ...]    upsample_rates: Tuple[int, ...]    upsample_initial_channel: int    upsample_kernel_sizes: Tuple[int, ...]    @staticmethod    def low_quality() -> &#x22;ModelAudioConfig&#x22;:        return ModelAudioConfig(            resblock=&#x22;2&#x22;,            resblock_kernel_sizes=(3, 5, 7),            resblock_dilation_sizes=(                (1, 2),                (2, 6),                (3, 12),            ),            upsample_rates=(8, 8, 4),            upsample_initial_channel=256,            upsample_kernel_sizes=(16, 16, 8),        )    @staticmethod    def high_quality() -> &#x22;ModelAudioConfig&#x22;:        return ModelAudioConfig(            resblock=&#x22;1&#x22;,            resblock_kernel_sizes=(3, 7, 11),            resblock_dilation_sizes=(                (1, 3, 5),                (1, 3, 5),                (1, 3, 5),            ),            upsample_rates=(8, 8, 2, 2),            upsample_initial_channel=512,            upsample_kernel_sizes=(16, 16, 4, 4),        )@dataclassclass ModelConfig:    num_symbols: int    n_speakers: int    audio: ModelAudioConfig    mel: MelAudioConfig = field(default_factory=MelAudioConfig)    inter_channels: int = 192    hidden_channels: int = 192    filter_channels: int = 768    n_heads: int = 2    n_layers: int = 6    kernel_size: int = 3    p_dropout: float = 0.1    n_layers_q: int = 3    use_spectral_norm: bool = False    gin_channels: int = 0  # single speaker    use_sdp: bool = True  # StochasticDurationPredictor    segment_size: int = 8192    @property    def is_multispeaker(self) -> bool:        return self.n_speakers > 1    @property    def resblock(self) -> str:        return self.audio.resblock    @property    def resblock_kernel_sizes(self) -> Tuple[int, ...]:        return self.audio.resblock_kernel_sizes    @property    def resblock_dilation_sizes(self) -> Tuple[Tuple[int, ...], ...]:        return self.audio.resblock_dilation_sizes    @property    def upsample_rates(self) -> Tuple[int, ...]:        return self.audio.upsample_rates    @property    def upsample_initial_channel(self) -> int:        return self.audio.upsample_initial_channel    @property    def upsample_kernel_sizes(self) -> Tuple[int, ...]:        return self.audio.upsample_kernel_sizes    def __post_init__(self):        if self.is_multispeaker and (self.gin_channels == 0):            self.gin_channels = 512@dataclassclass TrainingConfig:    learning_rate: float = 2e-4    betas: Tuple[float, float] = field(default=(0.8, 0.99))    eps: float = 1e-9    # batch_size: int = 32    fp16_run: bool = False    lr_decay: float = 0.999875    init_lr_ratio: float = 1.0    warmup_epochs: int = 0    c_mel: int = 45    c_kl: float = 1.0    grad_clip: Optional[float] = None# @dataclass# class PhonemesConfig(DataClassJsonMixin):#     phoneme_separator: str = &#x22; &#x22;#     &#x22;&#x22;&#x22;Separator between individual phonemes in CSV input&#x22;&#x22;&#x22;#     word_separator: str = &#x22;#&#x22;#     &#x22;&#x22;&#x22;Separator between word phonemes in CSV input (must not match phoneme_separator)&#x22;&#x22;&#x22;#     phoneme_to_id: typing.Optional[typing.Dict[str, int]] = None#     pad: typing.Optional[str] = &#x22;_&#x22;#     bos: typing.Optional[str] = None#     eos: typing.Optional[str] = None#     blank: typing.Optional[str] = &#x22;#&#x22;#     blank_word: typing.Optional[str] = None#     blank_between: typing.Union[str, BlankBetween] = BlankBetween.WORDS#     blank_at_start: bool = True#     blank_at_end: bool = True#     simple_punctuation: bool = True#     punctuation_map: typing.Optional[typing.Dict[str, str]] = None#     separate: typing.Optional[typing.List[str]] = None#     separate_graphemes: bool = False#     separate_tones: bool = False#     tone_before: bool = False#     phoneme_map: typing.Optional[typing.Dict[str, typing.List[str]]] = None#     auto_bos_eos: bool = False#     minor_break: typing.Optional[str] = IPA.BREAK_MINOR.value#     major_break: typing.Optional[str] = IPA.BREAK_MAJOR.value#     break_phonemes_into_graphemes: bool = False#     break_phonemes_into_codepoints: bool = False#     drop_stress: bool = False#     symbols: typing.Optional[typing.List[str]] = None#     def split_word_phonemes(self, phonemes_str: str) -> typing.List[typing.List[str]]:#         &#x22;&#x22;&#x22;Split phonemes string into a list of lists (outer is words, inner is individual phonemes in each word)&#x22;&#x22;&#x22;#         return [#             word_phonemes_str.split(self.phoneme_separator)#             if self.phoneme_separator#             else list(word_phonemes_str)#             for word_phonemes_str in phonemes_str.split(self.word_separator)#         ]#     def join_word_phonemes(self, word_phonemes: typing.List[typing.List[str]]) -> str:#         &#x22;&#x22;&#x22;Split phonemes string into a list of lists (outer is words, inner is individual phonemes in each word)&#x22;&#x22;&#x22;#         return self.word_separator.join(#             self.phoneme_separator.join(wp) for wp in word_phonemes#         )# class Phonemizer(str, Enum):#     SYMBOLS = &#x22;symbols&#x22;#     GRUUT = &#x22;gruut&#x22;#     ESPEAK = &#x22;espeak&#x22;#     EPITRAN = &#x22;epitran&#x22;# class Aligner(str, Enum):#     KALDI_ALIGN = &#x22;kaldi_align&#x22;# class TextCasing(str, Enum):#     LOWER = &#x22;lower&#x22;#     UPPER = &#x22;upper&#x22;# class MetadataFormat(str, Enum):#     TEXT = &#x22;text&#x22;#     PHONEMES = &#x22;phonemes&#x22;#     PHONEME_IDS = &#x22;ids&#x22;# @dataclass# class DatasetConfig:#     name: str#     metadata_format: MetadataFormat = MetadataFormat.TEXT#     multispeaker: bool = False#     text_language: typing.Optional[str] = None#     audio_dir: typing.Optional[typing.Union[str, Path]] = None#     cache_dir: typing.Optional[typing.Union[str, Path]] = None#     def get_cache_dir(self, output_dir: typing.Union[str, Path]) -> Path:#         if self.cache_dir is not None:#             cache_dir = Path(self.cache_dir)#         else:#             cache_dir = Path(&#x22;cache&#x22;) / self.name#         if not cache_dir.is_absolute():#             cache_dir = Path(output_dir) / str(cache_dir)#         return cache_dir# @dataclass# class AlignerConfig:#     aligner: typing.Optional[Aligner] = None#     casing: typing.Optional[TextCasing] = None# @dataclass# class InferenceConfig:#     length_scale: float = 1.0#     noise_scale: float = 0.667#     noise_w: float = 0.8# @dataclass# class TrainingConfig(DataClassJsonMixin):#     seed: int = 1234#     epochs: int = 10000#     learning_rate: float = 2e-4#     betas: typing.Tuple[float, float] = field(default=(0.8, 0.99))#     eps: float = 1e-9#     batch_size: int = 32#     fp16_run: bool = False#     lr_decay: float = 0.999875#     segment_size: int = 8192#     init_lr_ratio: float = 1.0#     warmup_epochs: int = 0#     c_mel: int = 45#     c_kl: float = 1.0#     grad_clip: typing.Optional[float] = None#     min_seq_length: typing.Optional[int] = None#     max_seq_length: typing.Optional[int] = None#     min_spec_length: typing.Optional[int] = None#     max_spec_length: typing.Optional[int] = None#     min_speaker_utterances: typing.Optional[int] = None#     last_epoch: int = 1#     global_step: int = 1#     best_loss: typing.Optional[float] = None#     audio: AudioConfig = field(default_factory=AudioConfig)#     model: ModelConfig = field(default_factory=ModelConfig)#     phonemes: PhonemesConfig = field(default_factory=PhonemesConfig)#     text_aligner: AlignerConfig = field(default_factory=AlignerConfig)#     text_language: typing.Optional[str] = None#     phonemizer: typing.Optional[Phonemizer] = None#     datasets: typing.List[DatasetConfig] = field(default_factory=list)#     inference: InferenceConfig = field(default_factory=InferenceConfig)#     version: int = 1#     git_commit: str = &#x22;&#x22;#     @property#     def is_multispeaker(self):#         return self.model.is_multispeaker or any(d.multispeaker for d in self.datasets)#     def save(self, config_file: typing.TextIO):#         &#x22;&#x22;&#x22;Save config as JSON to a file&#x22;&#x22;&#x22;#         json.dump(self.to_dict(), config_file, indent=4)#     def get_speaker_id(self, dataset_name: str, speaker_name: str) -> int:#         if self.speaker_id_map is None:#             self.speaker_id_map = {}#         full_speaker_name = f&#x22;{dataset_name}_{speaker_name}&#x22;#         speaker_id = self.speaker_id_map.get(full_speaker_name)#         if speaker_id is None:#             speaker_id = len(self.speaker_id_map)#             self.speaker_id_map[full_speaker_name] = speaker_id#         return speaker_id#     @staticmethod#     def load(config_file: typing.TextIO) -> &#x22;TrainingConfig&#x22;:#         &#x22;&#x22;&#x22;Load config from a JSON file&#x22;&#x22;&#x22;#         return TrainingConfig.from_json(config_file.read())#     @staticmethod#     def load_and_merge(#         config: &#x22;TrainingConfig&#x22;,#         config_files: typing.Iterable[typing.Union[str, Path, typing.TextIO]],#     ) -> &#x22;TrainingConfig&#x22;:#         &#x22;&#x22;&#x22;Loads one or more JSON configuration files and overlays them on top of an existing config&#x22;&#x22;&#x22;#         base_dict = config.to_dict()#         for maybe_config_file in config_files:#             if isinstance(maybe_config_file, (str, Path)):#                 # File path#                 config_file = open(maybe_config_file, &#x22;r&#x22;, encoding=&#x22;utf-8&#x22;)#             else:#                 # File object#                 config_file = maybe_config_file#             with config_file:#                 # Load new config and overlay on existing config#                 new_dict = json.load(config_file)#                 TrainingConfig.recursive_update(base_dict, new_dict)#         return TrainingConfig.from_dict(base_dict)#     @staticmethod#     def recursive_update(#         base_dict: typing.Dict[typing.Any, typing.Any],#         new_dict: typing.Mapping[typing.Any, typing.Any],#     ) -> None:#         &#x22;&#x22;&#x22;Recursively overwrites values in base dictionary with values from new dictionary&#x22;&#x22;&#x22;#         for key, value in new_dict.items():#             if isinstance(value, collections.Mapping) and (#                 base_dict.get(key) is not None#             ):#                 TrainingConfig.recursive_update(base_dict[key], value)#             else:#                 base_dict[key] = value"><div></div></button></div></figure></div> </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links print:hidden astro-u2l5gyhi" dir="ltr"> <a href="/piper-docs/codereading/python/piper_train/vits/commons/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">commmons.py</span> </span> </a> <a href="/piper-docs/codereading/python/piper_train/vits/dataset/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">dataset.py</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>